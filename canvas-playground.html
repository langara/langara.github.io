<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="pl" xmlns="http://www.w3.org/1999/xhtml" xml:lang="pl">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link href="style1.css" rel="stylesheet" type="text/css"/>
    <script src="https://unpkg.com/kotlin-playground@1" data-selector="code.playground"></script>
    <title>Canvas Playground</title>
</head>

<body>

<div class="rozdzial">

<h2>Canvas Playground</h2>
<p>
    Example code snippet copied from:
    <a href="https://try.kotlinlang.org/#/Examples/Canvas/Fancy%20lines/Fancy%20lines.kt">
        try.kotlinlang.org - fancy lines
    </a>
</p>

<pre><code class="playground" data-target-platform="canvas">
package hello

import jquery.*
import org.w3c.dom.CanvasRenderingContext2D
import org.w3c.dom.HTMLCanvasElement
import kotlin.browser.document
import kotlin.browser.window
import kotlin.random.*
import kotlin.math.*

val &#60;T&#62; T.l get() = apply { console.log(this) }

fun main(args: Array&#60;String&#62;) {
    val canvas = document.createElement("canvas").l as HTMLCanvasElement
    val context = canvas.getContext("2d").l as CanvasRenderingContext2D
    document.body!!.appendChild(canvas)
    context.drawRectangles()
    context.drawRectangles()
    window.setInterval({ context.drawRectangles() }, 600)
}

val random = Random(666)
fun around(value: Int) = value + random.nextInt(value / 3) - value / 6 + 1
fun around(value: Double) = value + random.nextDouble(value / 3) - value / 6 + 1

fun CanvasRenderingContext2D.drawRectangles() {
    fillStyle = "rgb(200, 0, 0, 0.2)"
    fillRect(around(10.0), around(10.0), around(50.0), around(50.0))
    fillStyle = "rgb(0, 0, 200, 0.3)"
    fillRect(around(30.0), around(30.0), around(50.0), around(50.0))
}

</code></pre>

<pre><code class="playground" data-target-platform="canvas">

/*
This example is based on example from html5 canvas2D docs:
  http://www.w3.org/TR/2dcontext/
Note that only a subset of the api is supported for now.
*/

package fancylines

import jquery.*
import org.w3c.dom.CanvasRenderingContext2D
import org.w3c.dom.HTMLCanvasElement
import kotlin.browser.document
import kotlin.browser.window
import kotlin.random.*

fun main(args: Array&#60;String&#62;) {
    FancyLines().run()
}

val canvas = initalizeCanvas()
fun initalizeCanvas(): HTMLCanvasElement {
    val canvas = document.createElement("canvas") as HTMLCanvasElement
    val context = canvas.getContext("2d") as CanvasRenderingContext2D
    context.canvas.width  = window.innerWidth.toInt();
    context.canvas.height = window.innerHeight.toInt();
    document.body!!.appendChild(canvas)
    return canvas
}

class FancyLines() {
    val context = canvas.getContext("2d") as CanvasRenderingContext2D
    val height = canvas.height.toDouble()
    val width = canvas.width.toDouble()
    fun nextX() = Random.nextDouble(width)
    fun nextY() = Random.nextDouble(height)
    var x = nextX()
    var y = nextY()
    var hue = 0

    fun line() {
        context.save();

        context.beginPath();

        context.lineWidth = Random.nextDouble(20.0)
        context.moveTo(x, y);

        x = nextX()
        y = nextY()

        context.bezierCurveTo(nextX(), nextY(),
                nextX(), nextY(), x, y)

        hue += Random.nextInt(10)

        context.strokeStyle = "hsl($hue, 50%, 50%)";

        context.shadowColor = "white";
        context.shadowBlur = 10.0;

        context.stroke();

        context.restore();
    }

    fun blank() {
        context.fillStyle = "rgba(255,255,1,0.1)";
        context.fillRect(0.0, 0.0, width, height);
    }

    fun run() {
        window.setInterval({ line() }, 40);
        window.setInterval({ blank() }, 100);
    }
}

</code></pre>
</div>

</body>
</html>
